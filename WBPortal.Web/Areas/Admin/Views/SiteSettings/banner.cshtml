@using WBSSLStore.Web.Helpers.PopupForm
@using WBSSLStore.Domain
@model SiteSettings
@{
    ViewBag.Title = "Manage your banner";
    ViewBag.ShowDefaultBanner = (@Model != null && @Model.ID > 0).ToString().ToLower();
}
<script src="@Url.Content("~/Content/Admin/tiny_mce/jquery.tinymce.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/Admin/tiny_mce/tiny_mce.js")" type="text/javascript"></script>
<script type="text/javascript">
    $().ready(function () {
        $('textarea.tinymce').tinymce({
            // Location of TinyMCE script            
            // General options
            theme: "advanced",
            plugins: "imagemanager,autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist,-MailMerge",

            // Theme options
            theme_advanced_buttons1: "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect,MailMergeListBox",
            theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
            theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
            theme_advanced_buttons4: "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,|,insertimage",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_statusbar_location: "bottom",
            theme_advanced_resizing: true,

            extended_valid_elements: "link[rel|href],script[type|src]",
            // Example content CSS (should be your site CSS)
            content_css: "@WBSSLStore.Web.Helpers.WBHelper.CurrentColourCSS",

            // Drop lists for link/image/media/template dialogs
            template_external_list_url: "lists/template_list.js",
            external_link_list_url: "lists/link_list.js",
            external_image_list_url: "lists/image_list.js",
            media_external_list_url: "lists/media_list.js",

            // Replace values for the template plugin
            template_replace_values: {
                username: "Some User",
                staffid: "991234"
            }
        });
    });

    $(function () {
       
        if ('@ViewBag.ShowDefaultBanner' == 'false')
            defaultBanner();
        if ('@ViewBag.ShowDefaultBanner' == 'true')
            $('#dvBanner').show('slow');
    });

    function defaultBanner() {
        
        var objMainPath = $(location).attr('protocol') + '//' + $(location).attr('host') + '/content/banner/';
        var objImg1 = objMainPath + 'images/Geotrust.jpg';
        var objImg2 = objMainPath + 'images/RapidSSL.jpg';
        var objImg3 = objMainPath + 'images/thawte.jpg';
        var objImg4 = objMainPath + 'images/Verisign.jpg';
        var objImg5 = objMainPath + 'images/free-signup.jpg';

        var objHTML = '<script type="text/javascript" language="javascript">';
        objHTML += '$(function () {';
        objHTML += '$("#ulbanner").vSlider(); });';
        objHTML += '</s' + 'cript>';
        objHTML += '<ul id="ulbanner"><li><img src="' + objImg1 + '" alt="" /></li><li><img src="' + objImg2 + '" alt="" /></li><li><img src="' + objImg3 + '" alt="" /></li><li><img src="' + objImg4 + '" alt="" /></li><li><img src="' + objImg5 + '" alt="" /></li></ul>';
        $('#txtbanner').text('');
        $('#txtbanner').text(objHTML);
        
        
    }

</script>
<div id="dvCropPopupLoader" class="backgroundPopup" style="position: fixed; display: none;
    opacity: 0.7;">
    <img alt="" src='@WBSSLStore.Web.Util.WBSiteSettings.AdminImagePath/loadingnew.gif' style="margin-top: 25%;
            margin-left: 50%;" /></div>
<tr>
    <td align="left" valign="top">
        <table width="881" border="0" align="left" cellpadding="0" cellspacing="0">
            <tr>
                <td width="7" align="left" valign="top">
                    <img src="/content/Admin/images/barleft.gif" alt="whitebrand" width="7" height="55">
                </td>
                <td width="866" align="left" valign="middle" class="hdbarbg">
                    <table width="840" border="0" align="center" cellpadding="1" cellspacing="1">
                        <tr>
                            <td width="407" align="left" valign="middle" class="head1">
                                @WBSSLStore.Resources.GeneralMessage.Message.Banner_Header
                            </td>
                        </tr>
                    </table>
                </td>
                <td width="9" align="right" valign="top">
                    <img src="/content/Admin/images/barright.gif" alt="whitebrand" width="9" height="55" />
                </td>
            </tr>
        </table>
    </td>
</tr>
<tr>
    <td align="left" valign="top" class="contbg">
        @using (Html.BeginForm("banner", "sitesettings", FormMethod.Post, new { enctype = "multipart/form-data", id = "frmSetting" }))
        {
            <table width="95%" border="0" align="left" cellpadding="2" cellspacing="2">
                <tbody>
                    <tr>
                        <td height="25" align="left" valign="middle" colspan="2">
                            @if (!string.IsNullOrEmpty(ViewBag.Message))
                            { 
                                @Html.Raw(ViewBag.Message)
                            }
                        </td>
                    </tr>
                    <tr>
                        <td width="15%" align="left" valign="top" class="bold">
                            @WBSSLStore.Resources.GeneralMessage.Message.Show_Banner :
                        </td>
                        <td align="left" valign="middle" width="70%">
                            <table width="146" border="0" align="left" cellpadding="1" cellspacing="1">
                                <tr>
                                    <td width="20" align="left" valign="middle" class="bold">
                                        <label>
                                            <input type="radio" name="rbtNeedBanner" onclick="$('#dvBanner').hide('slow');" id="rbtNeedBannerNo" value="False" @(string.IsNullOrEmpty(@ViewBag.ShowDefaultBanner) || @ViewBag.ShowDefaultBanner == "false" ? "checked='checked'" : string.Empty) />
                                        </label>
                                    </td>
                                    <td width="22" align="left" valign="middle" class="bold">
                                        @WBSSLStore.Resources.GeneralMessage.Message.No_CAption
                                    </td>
                                    <td width="21" align="left" valign="middle" class="bold">
                                        <input type="radio" name="rbtNeedBanner" onclick="$('#dvBanner').show('slow');" id="rbtNeedBannerYes" value="True" @(!string.IsNullOrEmpty(@ViewBag.ShowDefaultBanner) && @ViewBag.ShowDefaultBanner == "true" ? "checked='checked'" : string.Empty) />
                                    </td>
                                    <td width="70" align="left" valign="middle" class="bold">
                                        @WBSSLStore.Resources.GeneralMessage.Message.Yes_CAption
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr id="dvBanner" style="display: none;">
                        <td align="left" valign="middle" colspan="2">
                            <i><b>@WBSSLStore.Resources.GeneralMessage.Message.Notes_Caption</b>: @WBSSLStore.Resources.LongText.Message.Banner_Note</i>
                            <br />
                            <br />
                            <div style="width:100%;padding-left:10px;">
                                @Html.TextAreaFor(model => model.Value, new { @class = "tinymce", @style = "width: 100%;padding-left:10px;", @rows = "35", @id = "txtbanner" })
                            </div>
                            @Html.HiddenFor(model => model.SiteID)
                            @Html.HiddenFor(model => model.Key, new { @value = SettingConstants.CURRENT_BANNER_HTML_KEY })
                        </td>
                    </tr>
                    <tr>
                        <td width="15%" align="left" valign="top" class="bold">
                            &nbsp;
                        </td>
                        <td align="left" valign="middle">
                            <input name="btnSubmit" type="submit" class="bluebtn" id="btnSubmit" value="@WBSSLStore.Resources.GeneralMessage.Message.Submit_Btn" />
                            &nbsp;&nbsp;<input name="btnReset" type="submit" class="bluebtn" id="btnReset" value="@WBSSLStore.Resources.GeneralMessage.Message.Reset_Btn" onclick="defaultBanner();" />
                        </td>
                    </tr>
                </tbody>
            </table>
        }
    </td>
</tr>
